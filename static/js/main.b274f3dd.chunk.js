(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);n(61),n(86);var a=n(0),i=n.n(a),r=n(37),c=n.n(r),o=n(16),s=n.n(o),l=n(23),u=n(24),p=n(26),m=n(25),d=n(27),h=n(7),b=(n(109),n(18)),f=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={items:[{id:250409,owner_id:-124527492,title:"Persik",description:"A majestic furball who adores to sleep, to purr, and to play with a computer mouse.",price:{amount:"100000",currency:{id:643,name:"RUB"},text:"1,000 rub."},category:{id:1001,name:"Cats",section:{id:10,name:"Pets"}},date:1467722904,thumb_photo:"https://pp.vk.me/c631229/v631229852/3b6f3/SQ607FYCmy4.jpg",availability:0},{id:250407,owner_id:-124527492,title:"Spotty",description:"A tail wagging champion, true friend and never-failing warmer.",price:{amount:"100000",currency:{id:643,name:"RUB"},text:"1,000 rub."},category:{id:1e3,name:"Dogs",section:{id:10,name:"Pets"}},date:1467722851,thumb_photo:"https://pp.vk.me/c631229/v631229852/3b6e5/1OWGz65-8vw.jpg",availability:0},{id:250396,owner_id:-124527492,title:"First market item",description:"Description text",price:{amount:"10000",currency:{id:643,name:"RUB"},text:"100 rub."},category:{id:1,name:"Women's Clothing",section:{id:0,name:"Fashion"}},date:1467721947,thumb_photo:"https://pp.vk.me/c633819/v633819852/37ae0/7lXUEbCwYYM.jpg",availability:0}]},n.getItems=n.getItems.bind(Object(b.a)(Object(b.a)(n))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getItems",value:function(){var e="https://api.vk.com/method/market.get?v=5.52&access_token=".concat(this.props.authToken,"&owner_id=-").concat(124527492);return fetch(e).then(function(e){return e.json()}).then(function(e){return e.response.item}).catch(function(e){return[]})}},{key:"componentDidMount",value:function(){var e=this;this.getItems().then(function(t){return e.setState({items:t})})}},{key:"render",value:function(){var e=this.props.id;return i.a.createElement(h.Panel,{id:e},i.a.createElement(h.PanelHeader,null,"\u0422\u043e\u0432\u0430\u0440\u044b"),i.a.createElement(h.Group,null,i.a.createElement(h.List,null,this.state.items.length>0&&this.state.items.map(function(e,t){return i.a.createElement(h.Cell,{key:t,before:i.a.createElement("img",{style:{width:40,height:40,margin:10},src:e.thumb_photo}),multiline:!0,description:e.description},e.title,", ",e.price.amount," ",e.price.currency.name)}),0==this.state.items.length&&i.a.createElement(h.Div,null,"\u0425\u043c, \u043d\u043e \u043c\u044b \u043d\u0435 \u043d\u0430\u0448\u043b\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432."))))}}]),t}(i.a.Component),v=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).go=function(e){n.setState({activePanel:e.currentTarget.dataset.to})},n.state={activePanel:"home",fetchedUser:null,authToken:null},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;s.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;case"VKWebAppAccessTokenReceived":console.log(t.detail),e.setState({authToken:t.detail.data.access_token});break;case"VKWebAppAccessTokenFailed":console.log(t.detail);break;default:console.log(t.detail.type)}}),s.a.send("VKWebAppGetUserInfo",{}),s.a.send("VKWebAppGetAuthToken",{app_id:6906999,scope:"market"})}},{key:"render",value:function(){return i.a.createElement(h.View,{activePanel:this.state.activePanel},i.a.createElement(f,{id:"home",authToken:this.state.authToken,fetchedUser:this.state.fetchedUser,go:this.go}))}}]),t}(i.a.Component);s.a.send("VKWebAppInit",{}),c.a.render(i.a.createElement(v,null),document.getElementById("root"))},60:function(e,t,n){e.exports=n(110)}},[[60,1,2]]]);
//# sourceMappingURL=main.b274f3dd.chunk.js.map